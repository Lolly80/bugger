// Generated by CoffeeScript 1.6.1
var conn, debugBrk, debugPort, entryScript, net, requireScript, spawn;

requireScript = require('../bugger').requireScript;

spawn = require('child_process').spawn;

net = require('net');

if (!module.parent) {
  debugBrk = process.argv[2] === 'true';
  debugPort = process.argv[3];
  entryScript = process.argv[4];
  conn = net.connect(debugPort, function() {
    conn.end();
    return requireScript(entryScript, debugBrk);
  });
}

module.exports = function(entryScript, debugPort, debugBrk, argv_) {
  var args, entryScriptProc;
  args = ["--debug=" + debugPort, module.filename, debugBrk.toString(), debugPort, entryScript].concat(argv_.splice(1));
  entryScriptProc = spawn(process.execPath, args);
  entryScriptProc.stdout.pipe(process.stdout);
  entryScriptProc.stderr.pipe(process.stderr);
  return entryScriptProc;
};
